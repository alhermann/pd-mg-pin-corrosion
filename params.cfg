# Peridynamic Mg-Pin Corrosion Simulation — Parameters
# Based on Reimers et al. (2023): 80 um Mg-4Ag wire in SBF flow cell

# Grid
dx = 5.0e-6
m_ratio = 3

# Geometry [m]
R_wire = 40.0e-6
L_wire = 400.0e-6
R_tube = 150.0e-6
L_upstream = 80.0e-6
L_downstream = 80.0e-6

# Fluid
rho_f = 1000.0
mu_f = 1.0e-3
gamma_eos = 7.0
c0 = 0.5
eta_density = 0.5

# Flow
Q_flow = 1.667e-8

# Mg solid
rho_m = 1738.0

# Transport (diffusivity in liquid for dissolved Mg species)
D_liquid = 1.0e-9
D_grain = 5.0e-11
D_gb = 5.0e-9
C_solid_init = 1.0
C_liquid_init = 0.0
C_thresh = 0.2
w_advect = 0.8

# Grain structure
grain_size_mean = 40.0e-6
grain_size_std = 5.0e-6
gb_width_cells = 1

# Corrosion kinetics
# k_corr: base surface corrosion rate [1/s]
# Calibrated for ~50% volume loss in 9h with 8 radial layers
# k_corr * f_exposure * t ≈ 0.8 per layer → k_corr ≈ 1e-3
k_corr = 1.0e-3
# gb_corr_factor: grain boundary corrosion enhancement
gb_corr_factor = 3.0

# Time stepping
cfl_factor = 0.05

# Coupling
flow_max_iters = 200000
flow_conv_tol = 5.0e-6
T_final = 32400
corrosion_steps_per_check = 1000
output_every_flow = 500
output_every_corr = 100
output_dir = output
